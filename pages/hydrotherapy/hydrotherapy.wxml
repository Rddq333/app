<cu-custom bgColor="bg-white" isBack="{{true}}">
    <view slot="content">超音波水疗</view>
</cu-custom>

<view class="status-card">
  <view class="status-header">
    <van-icon name="waves" size="40px" color="#38bdf8" />
    <view class="status-info">
      <view class="status-title">超音波水疗系统</view>
      <view class="status-desc">深层水疗，舒缓放松</view>
    </view>
    <van-tag type="{{therapyStatus === 'running' ? 'success' : 'default'}}" size="large">
      {{therapyStatus === 'running' ? '运行中' : '已停止'}}
    </van-tag>
  </view>
</view>

<!-- 设备状态提示 -->
<view class="device-status" wx:if="{{!isRunning}}">
  <van-cell-group>
    <van-cell title="设备状态" value="{{deviceStatus}}" />
    <van-cell title="连接状态" value="{{deviceConnected ? '已连接' : '未连接'}}" />
  </van-cell-group>
</view>


  
  
    <view class="hydrotherapy-container">
      <view class="section-title">基础水疗参数</view>
      <!-- 水温 -->
      <view class="param-row">
        <text class="param-label">水温</text>
        <slider min="30" max="45" step="0.5" value="{{params.waterTemp}}" bindchange="onWaterTempChange" show-value />
        <view class="quick-btns">
          <button wx:for="{{params.waterTempQuick}}" wx:key="item" size="mini" class="quick-btn" data-value="{{item}}" bindtap="onQuickTemp">{{item}}℃</button>
        </view>
        <text class="param-value">{{params.waterTemp}}℃</text>
      </view>

      <!-- 水压强度 -->
      <view class="param-row">
        <text class="param-label">水压强度</text>
        <radio-group bindchange="onWaterPressureChange">
          <label wx:for="{{waterPressureOptions}}" wx:key="item">
            <radio value="{{item}}" checked="{{params.waterPressure === item}}" />{{item}}
          </label>
        </radio-group>
      </view>

      <!-- 按摩模式 -->
      <view class="param-row">
        <text class="param-label">按摩模式</text>
        <radio-group value="{{params.massageMode}}" bindchange="onMassageModeChange">
          <label wx:for="{{massageModeOptions}}" wx:key="item">
            <radio value="{{item}}" checked="{{params.massageMode === item}}" />{{item}}
          </label>
        </radio-group>
      </view>

      <!-- 持续时间 -->
      <view class="param-row">
        <text class="param-label">持续时间</text>
        <picker mode="selector" range="{{durationOptions}}" value="{{durationIndex}}" bindchange="onDurationChange">
          <view class="picker-value">{{params.duration}}分钟</view>
        </picker>
      </view>

      <!-- 重点部位 -->
      <view class="param-row">
        <text class="param-label">重点部位</text>
        <checkbox-group value="{{params.focusAreas}}" bindchange="onFocusAreasChange">
          <label wx:for="{{focusAreaOptions}}" wx:key="item">
            <checkbox value="{{item}}" />{{item}}
          </label>
        </checkbox-group>
      </view>

      <view class="section-title">专业水疗参数</view>
      <!-- 频率 -->
      <view class="param-row">
        <text class="param-label">频率</text>
        <slider min="20" max="1000" step="10" value="{{params.frequency}}" bindchange="onFrequencyChange" show-value />
        <text class="param-value">{{params.frequency}}kHz</text>
      </view>
      <!-- 强度 -->
      <view class="param-row">
        <text class="param-label">强度</text>
        <slider min="0.1" max="3.0" step="0.1" value="{{params.intensity}}" bindchange="onIntensityChange" show-value />
        <text class="param-value">{{params.intensity}} W/cm²</text>
      </view>
      <!-- 超声模式 -->
      <view class="param-row">
        <text class="param-label">超声模式</text>
        <radio-group bindchange="onTherapyModeChange">
          <label wx:for="{{therapyModeOptions}}" wx:key="item">
            <radio value="{{item}}" checked="{{params.therapyMode === item}}" />{{item}}
          </label>
        </radio-group>
      </view>

      <view class="section-title">增强体验参数</view>
      <!-- 水流按摩 -->
      <view class="param-row">
        <text class="param-label">水流按摩</text>
        <radio-group bindchange="onFlowMassageChange">
          <label wx:for="{{flowMassageOptions}}" wx:key="item">
            <radio value="{{item}}" checked="{{params.flowMassage === item}}" />{{item}}
          </label>
        </radio-group>
      </view>
      <!-- 气泡量 -->
      <view class="param-row">
        <text class="param-label">气泡量</text>
        <slider min="0" max="100" step="1" value="{{params.bubbleAmount}}" bindchange="onBubbleAmountChange" show-value />
        <text class="param-value">{{params.bubbleAmount}}%</text>
      </view>

      <view class="config-card" wx:if="{{isRunning}}">
    <view class="section-title">运行信息</view>
    <van-cell-group>
      <van-cell title="运行时间" value="{{runningTime}}" />
      <van-cell title="剩余时间" value="{{remainingTime}}" />
      <van-cell title="水温" value="{{params.waterTemp}}℃" />
      <van-cell title="水压" value="{{params.waterPressure}}" />
      <van-cell title="按摩模式" value="{{params.massageMode}}" />
      <van-cell title="当前状态" value="{{therapyStatus === 'running' ? '运行中' : (therapyStatus === 'paused' ? '已暂停' : '已停止')}}" />
    </van-cell-group>
  </view>
  <view class="control-buttons">
    <van-button 
      type="{{isRunning ? (isPaused ? 'primary' : 'warning') : 'primary'}}" 
      size="large" 
      block 
      custom-class="round-btn"
      bind:tap="onToggle"
      loading="{{loading}}"
    >
      {{isRunning ? (isPaused ? '继续' : '暂停') : '启动'}}
    </van-button>
    <van-button 
      wx:if="{{isRunning}}" 
      type="danger" 
      size="large" 
      block 
      custom-class="round-btn"
      bind:tap="onStop"
      style="margin-top: 10px;"
    >
      结束
    </van-button>
  </view>
    </view>

 
